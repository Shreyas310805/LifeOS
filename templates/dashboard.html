{% extends "base.html" %}

{% block content %}
<div class="header">
    <div class="welcome-text">
        <h2>Hello, {{ user.name }}</h2>
        <p>Focus on the process.</p>
    </div>
    <div class="level-badge">
        ‚≠ê Level {{ user.level }}: {{ user.title if user.title else 'Novice' }}
    </div>
</div>

<div class="stats-row">
    <div class="stat-card xp-card">
        <div class="xp-value">‚ö° {{ user.total_xp }}</div>
        <div class="xp-label">Total XP Earned</div>
    </div>

    <div class="stat-card">
        <div class="ring green"><div class="ring-text">69%</div></div>
        <div class="stat-value">Fitness Goal</div>
    </div>
    
    <div class="stat-card">
        <div class="ring orange"><div class="ring-text">67%</div></div>
        <div class="stat-value">Calories</div>
    </div>
</div>

<div class="ai-insight">
    <div class="ai-avatar">AI</div>
    <div class="ai-text">
        <strong>LifeOS Coach</strong><br>
        Welcome back! The AI is ready to judge your tasks. Add a new quest below.
    </div>
</div>

<div class="card" style="margin-top: 1.5rem;">
    <h3>‚ûï Add New Quest</h3>
    <form action="{{ url_for('add_task') }}" method="POST" style="display: flex; gap: 10px; margin-top: 1rem;">
        <input type="text" name="task_name" placeholder="E.g., Read 10 pages of OS..." required style="flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white;">
        
        <select name="category" style="padding: 10px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white;">
            <option value="Academic">Academic</option>
            <option value="Fitness">Fitness</option>
            <option value="Chore">Chore</option>
            <option value="Work">Work</option>
        </select>
        
        <button type="submit" class="verify-btn">Let AI Judge</button>
    </form>
</div>

<div class="card" style="margin-top: 2rem;">
    <h3>Active Quests</h3>
    
    {% for task in tasks %}
    <div class="task-item">
        <div class="task-info">
            <h4>{{ task.title }}</h4>
            <p>{{ task.category }} ‚Ä¢ <span style="color: #4ade80;">+{{ task.xp }} XP</span></p>
        </div>
        
        <div class="task-actions">
            {% if task.status == 'Pending' %}
                <a href="{{ url_for('complete_task', task_id=task.id) }}" class="verify-btn">Complete</a>
            {% else %}
                <span class="status-done">Done ‚úì</span>
            {% endif %}

            <a href="{{ url_for('delete_task', task_id=task.id) }}" class="delete-btn" title="Delete Task">üóëÔ∏è</a>
        </div>
    </div>
    {% endfor %}

</div>

{% endblock %}